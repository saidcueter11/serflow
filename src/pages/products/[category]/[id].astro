---
import { LeftArrowIcon } from '../../../components/icons/LeftArrowIcon'
import ProductPreview from '../../../components/ProductPreview'
import Layout from '../../../layouts/Layout.astro'
import { mockProducts } from '../../../mocks/mockProducts'

export const getStaticPaths = () => {
  return mockProducts.map((product) => ({
    params: { category: product.category, id: product.id.toString() },
    props: { product },
  }))
}

const { product } = Astro.props
---

<Layout title={product.category}>
  <div
    class="mt-12 max-w-3xl w-full h-full mx-auto flex flex-col gap-3 font-vend-sans"
  >
    <aside>
      <a
        href={`/products/${product.category}`}
        class="flex gap-2 text-accent group"
        data-astro-prefetch
      >
        <div class="bg-accent rounded-full">
          <LeftArrowIcon />
        </div>
        <span
          class="relative after:absolute after:bottom-0 after:left-0 after:right-0 after:h-[2px] after:w-full after:origin-bottom after:scale-x-0 after:bg-accent after:transition-transform after:duration-300 after:ease-[cubic-bezier(0.65_0.05_0.36_1)] group-hover:after:origin-bottom group-hover:after:scale-x-100"
          >Volver atr√°s</span
        >
      </a>
    </aside>

    <main class="w-full h-full">
      <ProductPreview
        id={product.id}
        mainImage={product.image}
        images={mockProducts.map((img) => img.image)}
        alt={product.category}
        client:load
      />
    </main>
  </div>
</Layout>
